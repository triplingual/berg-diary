<!DOCTYPE html>
<html>
<head>
	<title>Locating Mary Berg's Diary</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">

	<script src='https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js'></script>
	<script src='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.js'></script>
	<link href='https://api.mapbox.com/mapbox.js/v2.4.0/mapbox.css' rel='stylesheet' />
	<style type="text/css">
		.popup-title { font-weight:800; }
		.popup-address { font-style:italic; }
		.popup-desc {font-size:12px; }
	</style>
	<script>
	// Thank you, StackOverflow! 
	// http://stackoverflow.com/questions/2907482/how-to-get-the-query-string-by-javascript
	function getQueryStrings() { 
		var assoc  = {};
		var decode = function (s) { return decodeURIComponent(s.replace(/\+/g, " ")); };
		var queryString = location.search.substring(1); 
		var keyValues = queryString.split('&'); 

		for(var i in keyValues) { 
			var key = keyValues[i].split('=');
			if (key.length > 1) {
				assoc[decode(key[0])] = decode(key[1]);
			}
		} 

		return assoc; 
	} 
	</script>
</head>
<body>
	<div id="map" style="width:60%; height: 600px;float:left;"></div>
	<div id="text" style="width:38%; margin-left:2%; padding-right:2%; float:left; height:600px; overflow:scroll; font-size:20px; line-height: 140%;">
	<h1>Locating Mary Berg’s Diary: Finding Limits in Spatializing a Text of the Warsaw Ghetto</h1>
	<h2>The Diary</h2>
	<p>Ghetto children experienced a disrupted childhood at best. This was true for the small as well as the tall, with allowance for meaningful differences across stages of childhood. As Mary Berg  was an adolescent, it is those last days of childhood and the tumultuous engagement with adulthood that matter here. Berg was a combination of young enough and privileged enough to not need to engage in support for the family — to attend classes, to boot — but old enough to be highly independent in her engagement with the Ghetto. Indeed, Berg’s diary occupies a particularly valuable place in the history of children and childhood in the Holocaust because it represents one voice of late adolescence. Debórah Dwork has noted the difficulty in recovering the voice and story of children in the Holocaust as a result of the paucity of traditional historiographical sources but also the rewards available to those who would look harder for the traces children left. We are fortunate with Berg’s diary, of course, that it is more than a trace; it is a robust source with copious entries on many topics, including daily life, atrocities, suffering, moral equivocation, and others.</p>
	<p>Children coped with the disruption to their routines in many ways, depending on their health, shelter, hunger, family situation, and access to other resources. Their activities helped pass the time and acted as coping mechanisms for ghetto life. Tremendous numbers of them — over 150,000 of the ghetto inhabitants were refugees, of which one-third were children and many of whom were without resources — lived and died in the worst dwellings of the ghetto or on the streets. In a long and occasionally echt adolescent entry of June 12, 1941, Berg notes some of those she sees or knows about who find themselves in the direst straits:</p>
	<blockquote>
	<p>These people are ragged and barefoot, with the tragic eyes of those who are starving. Most of them are women and children. They become charges of the community, which sets them up in so-called homes. There they die sooner or later.</p>
	<p>I have visited such a refugee home. . . . On the floor I saw half-naked, unwashed children lying listlessly. In one corner an exquisite little girl of four or five sat crying. I could not refrain from stroking her disheveled blond hair. The child looked at me with her big blue eyes, and said: “I’m hungry.”</p>
	<p>. . .</p>
	<p>Some time ago a young boy who seemed to be about thirteen years old fainted in our doorway. One of the tenants brought him to and gave him some food. The boy had collapsed from hunger.</p>
	<p>. . .</p>
	<p>True, not all the children beg; many of them earn their living, often much more easily than their elders. Whole gangs of little children are organized, boys and girls from five to ten years of age. The smallest and most emaciated of them wrap burlap bags around their bony little bodies. Then they slink across to the “Aryan” side through the streets that are fenced off only by barbed wire.</p>
	</blockquote>
	<p>Children not among the indigent and imminently starving might have taken part in the establishment and efforts of the Toporol Society, formed to encourage gardening in the ghetto. To lead the way, the society worked with many boys and girls to clear vacant lots of rubble remaining from the German siege of Warsaw in 1939 and to turn the lots into gardens. Another girl diarist in Warsaw during the ghetto, Janina Bauman, describes working in a Toporol group both in her diary and in her memoir text as thoroughly enjoyable, indeed as “a green island in the midst of hell,” and “as a happy time of my youth”. Berg notes also that the Germans permits many youth (most of whom, she asserts, are Zionists) to work on small farms outside the city. Working on the farms served them as a way to occupy their time, work to create stable relationships, to build or dream of building the skills they would need in Palestine one day, and to bring food back home. Berg herself belongs to the tony segment of ghetto society, those who didn’t need to help provide for their family. She and spent her time at school, first in a clandestine regrouping of her Lodz gymnasium then in an authorized technical school; working together in block or house committees subordinate to the adult versions of these; assembling a musical performance group, ostensibly to raise money for charity but seemingly (given the lack of diary entry on fundraising success) mostly for the participants’ enjoyment; occasionally sunbathing. As with children in Joanna Sliwa’s study of the Kraków ghetto, Berg normalized her life by making friends, organizing gatherings with her friends, and creating habits of living and friendship with them.</p>

	</div>

	<p style="padding:1em; font-size:2em; line-height:1.3; clear:both;">What are <em><a href="mailto:kirkpatricr2@southernct.edu">your thoughts</a></em> on this map?</p>
	
	<script>
	// Not debugging out
	var DEBUGGING = 0;
	// Debugging out
	DEBUGGING = 1;
	
	// Set up id we're looking for
	var qs = getQueryStrings();
	var featureID = qs["id"]; 
	
	L.mapbox.accessToken = 'pk.eyJ1IjoidHJpcGxpbmd1YWwiLCJhIjoiUFZTSEpYNCJ9.TjhlG-pOgpKcxXt8vL-IOg';
// Mapbox light is nice and gray, appropriately muted perhaps
	var mapboxLight = L.tileLayer('https://api.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token=' + L.mapbox.accessToken, {
	    attribution: '© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
});
// Mapbox streets has the value of having country names in the/a national language
	var mapboxStreets = L.tileLayer('https://api.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=' + L.mapbox.accessToken, {
            attribution: '© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
});
// Mapbox satellite has the virtue of not having distracting 21st century nation-state borders
	var mapboxSatellite = L.tileLayer('https://api.mapbox.com/v4/mapbox.satellite/{z}/{x}/{y}.png?access_token=' + L.mapbox.accessToken, {
            attribution: '© <a href="https://www.mapbox.com/map-feedback/">Mapbox</a> © <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
});

// None of the Stamen layers feel quite right. Toner's too arty, Terrain's not available in Europe, Watercolor is too sunny (and arty)
// But I'm keeping the form in case I change my mind and don't want to chase it down again.
// NOTE: This attribution only valid for Toner. Watercolor and Terrain have different licensing.
//	var stamenTiles = L.tileLayer('http://tile.stamen.com/toner/{z}/{x}/{y}.jpg', {attribution: 'Map tiles by Stamen Design, under CC BY 3.0. Data by OpenStreetMap, under ODbL.'});

	var poland1939 = L.tileLayer('http://mapwarper.net/maps/tile/14002/{z}/{x}/{y}.png', {attribution: "Public domain map of Poland rail: National Library of Poland <a href='http://alpha.bn.org.pl/record=b2845525' title='National Library of Poland bibliographic entry for this map'>call no. ZZK 28 329</a>"}),
	warsaw1938 = L.tileLayer('http://mapwarper.net/maps/tile/14004/{z}/{x}/{y}.png', {attribution: "Public domain map of Warsaw: National Library of Poland <a href='http://alpha.bn.org.pl/record=b2449341' title='National Library of Poland bibliographic entry for this map'>call no. ZZK 8 869</a>"}),
	europe1940 = L.tileLayer('http://mapwarper.net/maps/tile/14116/{z}/{x}/{y}.png', {attribution: "Public domain map of Western Europe: National Library of Poland <a href='http://alpha.bn.org.pl/record=b4929987' title='National Library of Poland bibliographic entry for this map'>call no. ZZK 371</a>"});
//	europe1944 = L.tileLayer('http://warp.worldmap.harvard.edu/maps/tile/4885/{z}/{x}/{y}.png', {attribution: ""});
	
	var boundaries1940 = L.mapbox.featureLayer()
		.loadURL('./data/ghetto-boundaries-1940.geojson');
	var bergMentions = L.mapbox.featureLayer()
		.loadURL('./data/berg-places.geojson');

	var map = L.map('map')
	    .addLayer(mapboxLight)
	    .addLayer(europe1940)
	    .addLayer(warsaw1938)
	    .addLayer(poland1939)
	    .addLayer(bergMentions)
	    .setView([52.252856676244804,20.986633300781246], 5);

	var baseLayers = {
	    "Grayscale": mapboxLight,
	    "Streets": mapboxStreets,
	    "Landforms": mapboxSatellite
	};

	var overlays = {
	    "Europe 1940": europe1940,
	    "Poland Rail 1939": poland1939,
	    "Warsaw 1938/39": warsaw1938,
	    "Ghetto Boundaries 1940": boundaries1940,
	    "Mary Berg's Diary": bergMentions
	};

	L.control.layers(baseLayers, overlays).addTo(map);

/* Working 7 May 2016 4.10p */
/* using on.('layeradd') approach */
/*
	bergMentions.on('layeradd', function(e) {
		var marker = e.layer,
			feature = marker.feature;

		// Create custom popup content from the GeoJSON properties
		var popupContent =  feature.properties.addrEn;

		// bind the popup to the marker http://leafletjs.com/reference.html#popup
		marker.bindPopup(popupContent,{
			closeButton: false
		});
	});
*/

/* Working 7 May 2016 4.15p */
/* using on.('ready') approach */
	bergMentions.on('ready', function() {
		bergMentions.eachLayer(function(layer) {
			var layerLabel, layerText;
			
			// If there's a name, make it the popup title
			// If there's an address, use it
			// If there's an address but no name, use the address as the name but don't display the address twice
			
			var n = layer.feature.properties.nameEn;
			var a = layer.feature.properties.addrEn;
			var d = layer.feature.properties.desc;
			
			if (n != undefined) {
				popupTitle = '<p class="popup-title">' + n + '</p>';
			} else { // n === undefined
				if (a != undefined) {
					popupTitle = '<p class="popup-title">' + a + '</p>';
				} else {
					popupTitle = '<p class="popup-title">[Unidentified Place]</p>';
				}
			}
			
			if (a != undefined && n === undefined) {
				popupAddress = "";
			} else {
				if (a != undefined && n != undefined) {
					popupAddress = '<p class="popup-address">' + a + '</p>';
				} else {
					popupAddress = '';
				}
			}
			
			if (d != undefined) {
				popupText = '<p class="popup-desc">' + d + '</p>';
			} else {
				popupText = '<p class="popup-desc">Description to come</p>';
			}
			var popupContent = popupTitle + popupAddress + popupText
			layer.bindPopup( popupContent );
		});
	    map.fitBounds(bergMentions.getBounds());
	    if ( DEBUGGING ) {
		    map.setView([52.252856676244804,20.986633300781246], 14);
	    }
	});
	
	/* Testing filters */
	/* Working 7 May 2016 10.30p */
	// Thank you, StackOverflow
	// http://stackoverflow.com/questions/30340266/set-default-marker-filter-in-mapbox

	// This restrict what shows on the map based on a value passed in the querystring.
	bergMentions.setFilter(function(f) {
		return f.properties['id'] === featureID;
	});


// I can get it, but not when I want it.
// Possibly too much gingerbread, though.
//    window.alert("zoom = " + map.getZoom());
</script>
</body>
</html>